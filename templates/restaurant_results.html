{% extends 'base.html' %}

{% block content %}
	<h2>Restaurant search results: </h2>
	<table class="table table-striped table-hover">
	    <thead>
	        <th>Restaurant</th>
	        <th>Address</th>
	        <th>City </th>
	        <th>State</th>
	    </thead>
	    <tbody>
		    {% for item in fs_venues_list %}
		    	{% if item.location.address is defined %}
				    <tr class='clickable-row' data-id= {{item.id}} data-lat={{item.location.lat}}>
				        <td>{{ item['name'] }} </td>
				        <td>{{ item['location']['address'] }}</td>
				        <td>{{ item['location']['city'] }}</td>
				        <td>{{ item['location']['state'] }}</td>
				 	</tr>
				{% endif %}
			{% endfor %}

		</tbody>
    </table>
{% endblock %}

{% block js_reference %}
	<script>
	$('.clickable-row').click(function(e){
		var fsqId = $(this).data('id')
		var lat = $(this).data('lat')
		
		$.get("/save_restaurant", {"fsqId":fsqId, "lat": lat}, function(data) {
			// Success callback function is returned data as a JSON object
			console.log(data);
			console.log("Got to save restaurant route!");
		});
	}); 
	</script>
{% endblock %}