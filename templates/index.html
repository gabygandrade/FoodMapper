<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        <link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../static/css/style.css">
    </head>

 	<body class="index">
		<div class="container">
			<div class="main-content">
				<h1>bite</h1>
				<p>Save, Map and Recommend Restaurants</p>
				<button class="btn login-btn" data-toggle="modal" data-target="#loginModal">Login</button>
				<a data-toggle="modal" data-target="#signUpModal">New User?</a>
			</div>
		</div>
		<!-- Log In Modal -->
		<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="false">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Please Login</h4>
		      </div>
		      <div class="modal-body">
				<form class="signin-form" method="POST" autocomplete="on" action="/login">
					<input type="text" name="username" class="form-control" placeholder="Username" required autofocus />
					<input type="password" name="password" class="form-control" placeholder="Password" required />
					<button type="btn" class="btn btn-default" type="submit">Sign In</button>
				</form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>
		<!-- Sign Up Modal -->
		<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="false">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Please Create a New Account</h4>
		      </div>
		      <div class="modal-body">
				<form class="signup-form" autocomplete="on">
					<input type="email" name="email" class="form-control" placeholder="Email" required autofocus />
					 <input type="text" name="username" class="form-control" placeholder="Username" required autofocus />
					<input type="password" name="password" class="form-control" placeholder="Password" required />
					<button type="btn" class="btn btn-default" type="submit">Sign Up</button>
				</form>
		      </div>
		      <div class="modal-footer">
		      	<!-- <div class="login-alert alert-danger"></div> -->
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>

 		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript for Bootstrap-->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
        {% block js_code %}
        <script>
			$(".signup-form").submit(function(evt){
				var formData = $(this).serialize();
				var request = $.ajax({
					method: 'POST',
					url: '/signup',
					data: formData,
				});
			});

			var loginError = 
			{% if error is defined %}
				true
				{% else %}
				false
			{% endif %};

			if (loginError){
				$('#loginModal').modal('show');
				$('.modal-footer').prepend("<p style='color:red'>That email or password is incorrect. Please try again.</p>");
			}
		</script>
    	{% endblock %}

    </body>
</html>
